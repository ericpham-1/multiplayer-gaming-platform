<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Rectangle?>

<BorderPane prefHeight="1024.0" prefWidth="1440.0" style="-fx-background-color: #000000;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.game.gui.ConnectFourController">
    <!-- Header -->
    <top>
        <HBox prefHeight="74.0" style="-fx-background-color: #0b0b0b; -fx-border-color: #1c1d1f; -fx-border-width: 1 0 0 0; -fx-padding: 10;" styleClass="header">
            <children>
                <Pane HBox.hgrow="ALWAYS">
                    <children>
                        <!-- Game Title -->
                        <Label fx:id="gameTitleLabel" layoutX="364.0" layoutY="12.0" prefHeight="29.0" prefWidth="339.0" style="-fx-text-fill: #e5e7eb; -fx-font-size: 23px; -fx-font-family: 'Inter';" styleClass="game-title" text="Connect Four" />
                        <Label layoutX="57.0" layoutY="9.0" style="-fx-text-fill: #ffffff; -fx-font-size: 30px; -fx-font-family: 'Inter';" styleClass="header-title" text="OMG Platform" />
                        <ImageView fitHeight="25.0" fitWidth="25.0" layoutX="331.0" layoutY="14.0">
                            <image>
                                <Image url="@connect4_images/connect_4_large_white.png" />
                            </image>
                        </ImageView>
                    </children>
                </Pane>
                <Pane HBox.hgrow="ALWAYS">
                    <children>
                        <HBox alignment="CENTER_RIGHT" spacing="10.0" style="-fx-cursor: hand;" />
                          <Label fx:id="networkTextLabel" layoutX="105.0" layoutY="17.0" onMouseClicked="#handleNetworkDetailsClick" style="-fx-text-fill: #ffffff; -fx-font-size: 14px; -fx-font-family: 'Inter'; -fx-cursor: hand;" text="Network" />
                          <ImageView fx:id="networkIcon" fitHeight="16.0" fitWidth="20.0" layoutX="168.0" layoutY="19.0" onMouseClicked="#handleNetworkDetailsClick" style="-fx-cursor: hand;">
                              <image>
                                  <Image url="@../game_images/network icon.png" />
                              </image>
                          </ImageView>
                    </children>
                </Pane>
            </children>
        </HBox>
    </top>

    <!-- Main Content -->
    <center>
        <HBox spacing="19.0" style="-fx-padding: 82 0 0 67;" styleClass="main-content">
            <children>
                <!-- Players' Information -->
                <VBox prefWidth="256.0" spacing="20.0" styleClass="players-info">
                    <!-- Player 1 Info -->
                    <VBox prefHeight="341.0" style="-fx-background-color: #171717; -fx-border-radius: 12; -fx-background-radius: 12; -fx-padding: 16;" styleClass="player-info">
                        <children>
                            <HBox spacing="12.0">
                                <ImageView fitHeight="48.0" fitWidth="48.0">
                                    <image>
                                        <Image url="@../game_images/player1-avatar.png" />
                                    </image>
                                </ImageView>
                                <VBox>
                                    <Label fx:id="player1NameLabel" style="-fx-text-fill: #e5e7eb; -fx-font-size: 16px; -fx-font-family: 'Inter';" text="Player 1" />
                                    <Label fx:id="player1RankLabel" style="-fx-text-fill: #adaebc; -fx-font-size: 14px; -fx-font-family: 'Inter';" text="Rank: 1205" />
                                </VBox>
                            </HBox>
                            <VBox prefHeight="76.0" spacing="5.0" style="-fx-background-color: #262626; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12;" styleClass="time-remaining">
                                <Label fx:id="player1TimeLabel" style="-fx-text-fill: #e5e7eb; -fx-font-size: 24px; -fx-font-family: 'Inter'; -fx-alignment: center;" text="00:15" />
                                <Label style="-fx-text-fill: #adaebc; -fx-font-size: 14px; -fx-font-family: 'Inter'; -fx-alignment: center;" text="Time to Move" />
                                <VBox.margin>
                                    <Insets top="10.0" />
                                </VBox.margin>
                            </VBox>
                            <ImageView fx:id="player1PieceImage" fitHeight="100.0" fitWidth="100.0" pickOnBounds="true" preserveRatio="true">
                                <VBox.margin>
                                    <Insets bottom="10.0" left="55.0" top="10.0" />
                                </VBox.margin>
                                <image>
                                    <Image url="@connect4_images/blue_piece.png" />
                                </image>
                            </ImageView>
                            <Rectangle fx:id="player1TurnIndicator" fill="#262626" height="7.0" style="-fx-arc-height: 4; -fx-arc-width: 4;" width="219.0" VBox.vgrow="ALWAYS">
                                <VBox.margin>
                                    <Insets top="15.0" />
                                </VBox.margin>
                            </Rectangle>
                            <Label fx:id="player1TurnLabel" prefHeight="20.0" prefWidth="220.0" style="-fx-text-fill: #262626; -fx-font-size: 14px; -fx-font-family: 'Inter'; -fx-alignment: center;" text="Player 1’s Turn" />
                        </children>
                    </VBox>
                    <!-- Player 2 Info -->
                    <VBox prefHeight="341.0" style="-fx-background-color: #171717; -fx-border-radius: 12; -fx-background-radius: 12; -fx-padding: 16;" styleClass="player-info">
                        <children>
                            <HBox spacing="12.0">
                                <ImageView fitHeight="48.0" fitWidth="48.0">
                                    <image>
                                        <Image url="@../game_images/player2-avatar.png" />
                                    </image>
                                </ImageView>
                                <VBox>
                                    <Label fx:id="player2NameLabel" style="-fx-text-fill: #e5e7eb; -fx-font-size: 16px; -fx-font-family: 'Inter';" text="Player 2" />
                                    <Label fx:id="player2RankLabel" style="-fx-text-fill: #adaebc; -fx-font-size: 14px; -fx-font-family: 'Inter';" text="Rank: 1275" />
                                </VBox>
                            </HBox>
                            <VBox prefHeight="76.0" spacing="5.0" style="-fx-background-color: #262626; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12;" styleClass="time-remaining">
                                <Label fx:id="player2TimeLabel" style="-fx-text-fill: #e5e7eb; -fx-font-size: 24px; -fx-font-family: 'Inter'; -fx-alignment: center;" text="00:15" />
                                <Label style="-fx-text-fill: #adaebc; -fx-font-size: 14px; -fx-font-family: 'Inter'; -fx-alignment: center;" text="Time to Move" />
                                <VBox.margin>
                                    <Insets top="10.0" />
                                </VBox.margin>
                            </VBox>
                            <ImageView fx:id="player2PieceImage" fitHeight="100.0" fitWidth="100.0" pickOnBounds="true" preserveRatio="true">
                                <VBox.margin>
                                    <Insets bottom="10.0" left="55.0" top="10.0" />
                                </VBox.margin>
                                <image>
                                    <Image url="@connect4_images/red_piece.png" />
                                </image>
                            </ImageView>
                            <Rectangle fx:id="player2TurnIndicator" fill="#262626" height="7.0" style="-fx-arc-height: 4; -fx-arc-width: 4;" width="219.0">
                                <VBox.margin>
                                    <Insets top="15.0" />
                                </VBox.margin>
                            </Rectangle>
                            <Label fx:id="player2TurnLabel" prefHeight="20.0" prefWidth="216.0" style="-fx-text-fill: #262626; -fx-font-size: 14px; -fx-font-family: 'Inter'; -fx-alignment: center;" text="Player 2’s Turn">
                                <padding>
                                    <Insets top="5.0" />
                                </padding>
                            </Label>
                        </children>
                    </VBox>
                </VBox>
                <!-- Game Board and Buttons -->
                <VBox prefWidth="726.0" spacing="17.0" styleClass="game-area">
                    <Pane fx:id="gameBoardPane" prefHeight="702.0" prefWidth="726.0" style="-fx-background-color: #171717; -fx-border-radius: 6; -fx-background-radius: 6; -fx-padding: 20;" styleClass="game-board-outer">
                        <children>
                            <Pane fx:id="boardPane" layoutX="18.0" layoutY="31.5" prefHeight="639.0" prefWidth="690.0" style="-fx-background-color: #262626;" />
                            <Label fx:id="drawStatusLabel" layoutX="200.0" layoutY="679.0" prefHeight="19.0" prefWidth="300.0" style="-fx-text-fill: #facc15; -fx-font-size: 13px; -fx-font-family: 'Inter';" text="Draw Proposed - Waiting for Opponent" visible="false" />
                            <Label fx:id="timeoutStatusLabel" layoutX="18.0" layoutY="680.0" prefHeight="18.0" prefWidth="400.0" style="-fx-text-fill: #d7d429; -fx-font-size: 14px; -fx-font-family: 'DejaVu Sans Mono Bold';" visible="false" />
                        </children>
                    </Pane>
                    <HBox alignment="CENTER" spacing="70.0" styleClass="buttons">
                        <Button fx:id="requestDrawButton" onAction="#handleDrawRequest" prefHeight="59.0" prefWidth="225.0" style="-fx-background-color: #262626; -fx-text-fill: #e5e7eb; -fx-font-size: 19px; -fx-font-family: 'Inter'; -fx-border-radius: 13; -fx-background-radius: 13;" text="Request Draw">
                            <graphic>
                                <ImageView fitHeight="20.0" fitWidth="24.0">
                                    <image>
                                        <Image url="@../game_images/request draw.png" />
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>
                        <Button fx:id="forfeitButton" onAction="#handleForfeit" prefHeight="59.0" prefWidth="255.0" style="-fx-background-color: #262626; -fx-text-fill: #e5e7eb; -fx-font-size: 19px; -fx-font-family: 'Inter'; -fx-border-radius: 13; -fx-background-radius: 13;" text="Forfeit">
                            <graphic>
                                <ImageView fitHeight="22.0" fitWidth="19.0">
                                    <image>
                                        <Image url="@../game_images/forfeit.png" />
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>
                    </HBox>
                </VBox>
                <!-- Chat Section -->
                <VBox layoutX="1090.0" layoutY="96.0" maxHeight="702.0" prefHeight="695.0" prefWidth="293.0" spacing="16.0" style="-fx-background-color: #171717; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 16;" styleClass="chat">
                    <children>
                        <Label style="-fx-text-fill: #ffffff; -fx-font-size: 16px; -fx-font-family: 'Inter';" text="Chat" />
                        <ScrollPane hbarPolicy="NEVER" prefHeight="576.0" style="-fx-background-color: #262626; -fx-border-radius: 4; -fx-background-radius: 4;">
                            <content>
                                <!-- Empty VBox for dynamic chat items, background still set to #262626, with padding and spacing -->
                                <VBox fx:id="chatMessagesBox" maxHeight="576.0" maxWidth="261.0" minHeight="576.0" minWidth="261.0" spacing="16.0" style="-fx-padding: 16; -fx-background-color: #262626;" />
                            </content>
                        </ScrollPane>
                        <HBox alignment="CENTER_LEFT" spacing="6.0">
                            <TextField fx:id="chatInputField" prefHeight="28.0" prefWidth="221.0" promptText="Type a message..." style="-fx-background-color: #262626; -fx-text-fill: #adaebc; -fx-prompt-text-fill: #adaebc; -fx-font-size: 11px; -fx-font-family: 'Inter'; -fx-border-radius: 3; -fx-background-radius: 3;" />
                            <Button fx:id="sendChatButton" prefHeight="28.0" prefWidth="34.0" style="-fx-background-color: #404040; -fx-border-radius: 3; -fx-background-radius: 3;">
                                <graphic>
                                    <ImageView fitHeight="11.0" fitWidth="11.0">
                                        <image>
                                            <Image url="@../game_images/message button for game screen chat.png" />
                                        </image>
                                    </ImageView>
                                </graphic>
                            </Button>
                        </HBox>
                    </children>
                </VBox>
            </children>
        </HBox>
    </center>

    <!-- Footer -->
    <bottom>
        <HBox alignment="CENTER_LEFT" prefHeight="53.0" style="-fx-background-color: #000000; -fx-padding: 16 80 0 80;" styleClass="footer">
            <children>
                <Label style="-fx-text-fill: #404040; -fx-font-size: 14px; -fx-font-family: 'Inter';" text="© 2025 OMG Platform. All rights reserved." />
            </children>
        </HBox>
    </bottom>
</BorderPane>
